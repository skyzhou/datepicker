/*! qdp 2014-10-23 */
(function(t,e){"function"==typeof t.define?t.define(e):(t.qdp={},e(null,t.qdp))})(window,function(t,e){function n(t){for(var e,n=t.timestamp,a=t.group,i=t.dpid,o="",r="",d=0;e=f[a][d];d++)if(document.documentElement.contains(e)){var l=e.getAttribute("dpid");l!==i&&(i>l?r=n:o=n-m,e.setAttribute("begin",o),e.setAttribute("end",r))}else f[a].splice(d,1),d--}function a(t){t.setAttribute("dpid",++h),t.type="text";var e=t.getAttribute("timestamp"),n=t.getAttribute("begin"),a=t.getAttribute("end");e&&(t.value=r.format(new Date(1*e))),n||(n=0),a||(a=y),t.setAttribute("range",[n,a].join(","));var i=t.getAttribute("group");i&&(f[i]||(f[i]=[]),f[i].push(t))}function i(){for(var t,e=0;t=b[e];e++)"date"===t.getAttribute("type")&&"input"===t.nodeName.toLowerCase()&&a(t)}function o(){var t,e,n,a,i,o,d,c,u,f=this;t=document.createElement("div"),t.style.display="none",e=document.createElement("div"),n=document.createElement("ul"),a=document.createElement("ul"),t.appendChild(e),t.appendChild(n),t.appendChild(a),t.className="qdp-container",e.className="qdp-bar",n.className="qdp-days",a.className="qdp-dates",n.innerHTML=r.tmpl(p,{days:g.days}),e.innerHTML=r.tmpl(l,g),i=e.getElementsByTagName("label")[0],o=e.getElementsByTagName("select")[0],c={timestamp:+new Date,callback:function(){},x:0,y:0,begin:0,end:y,range:[0,y]},d={},this.show=function(e){for(var n in c)d[n]=e[n]||c[n];u=new Date(d.timestamp),this.render(),t.style.left=d.x+"px",t.style.top=d.y+"px",t.style.display="block"},this.hide=function(){t.style.display="none"},this.contains=function(e){return t.contains(e)},this.render=function(){var t=r.parseDate(u),e=t.year,n=t.month,l=t.count,p=t.emptys,c=t.first,g=t.last,f=new Date,h=-1,b=[],v=d.begin,y=d.end,x=d.range.split(",");x[0]>v&&(v=x[0]),y>x[1]&&(y=x[1]),f>c&&g>f&&(h=f.getDate());for(var w=0;l>w;w++){var q,D=c+w*m,A=w+1,E="qdp-date-item",T="ondate";(v>D||D>y)&&(E="qdp-disable",T="ondisable"),h==w+1&&(E+=" qdp-today"),q=d.timestamp-D,q>0&&m>q&&(E+=" qdp-selected"),b.push({date:A,cls:E,evt:T})}i.innerHTML=e,o.selectedIndex=n,a.innerHTML=r.tmpl(s,{dates:b,emptys:p})},document.body.appendChild(t),o.onchange=function(){u.setMonth(this.value),f.render()},r.event(e,"click",{prev:function(){u.setFullYear(u.getFullYear()-1),f.render()},next:function(){u.setFullYear(u.getFullYear()+1),f.render()}}),r.event(a,"click",{ondate:function(){u.setDate(this.innerText),d.callback(u),f.hide()}})}var r={};r.tmpl=function(){function t(t,e){if(e)for(var n in e){var a=RegExp("<%#"+n+"%>","g");t=t.replace(a,e[n])}return t}var e={};return function n(a,i,o){o=o||{};var r=o.key,d=o.mixinTmpl,l=!/\W/.test(a);r=r||(l?a:null);var p=r?e[r]=e[r]||n(t(l?document.getElementById(a).innerHTML:a,d)):Function("obj","var _p_=[],print=function(){_p_.push.apply(_p_,arguments);};with(obj){_p_.push('"+a.replace(/[\r\t\n]/g," ").split("\\'").join("\\\\'").split("'").join("\\'").split("<%").join("	").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("_p_.push('")+"');}return _p_.join('');");return i?p(i):p}}(),r.insertStyle=function(t){var e=document.createElement("style");return e.type="text/css",document.getElementsByTagName("head")[0].appendChild(e),t&&(e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))),e.sheet||e},r.parseDate=function(t){var e=new Date(+t),n={};return n.year=e.getFullYear(),n.month=e.getMonth(),n.date=e.getDate(),e.setDate(1),n.emptys=e.getDay()?e.getDay()-1:6,n.first=+new Date(n.year,n.month,e.getDate()),e.setMonth(e.getMonth()+1),e.setDate(0),n.count=e.getDate(),n.last=+new Date(n.year,n.month,e.getDate()),n},r.on=function(t,e,n){var a=function(t,e){t=t||window.event,e=t.target||t.srcElement,n.call(e,t)};t.addEventListener?t.addEventListener(e,a,!0):t.attachEvent&&t.attachEvent("on"+e,a)},r.ready=function(t){function e(){n||(n=!0,t())}var n=!1;"complete"===document.readyState?setTimeout(e):(this.on(document,"DOMContentLoaded",e),this.on(window,"load",e))},r.format=function(t){return t.toLocaleDateString().replace(/(\d{4}).(\d{2}).(\d{2})./,"$1/$2/$3")},r.getClientRect=function(t){try{var e=t.getBoundingClientRect(),n={};return e.width?(n=e,e.width=e.right-e.left,e.height=e.bottom-e.top):n={top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.right-e.left,height:e.bottom-e.top},n}catch(a){return{}}},function(){var t=function(t){return t.getAttribute("data-evt")},e=function(t){return!!t.getAttribute("data-evt")},n=function(t,n,a){a=a||this.judgeFn||e;for(var i=t.srcElement||t.target;i;){if(a(i))return i;if(n==i)break;i=i.parentNode}return null};r.event=function(e,a,i,o){o=o||t;var d=function(t){return!!o(t)},l=function(t){var a=n(t,e,d),r=!1;if(a){var l,p=o(a);"[object Function]"===Object.prototype.toString.call(i)?(l=i.call(a,t,p),r=!0):i[p]&&(l=i[p].call(a,t),r=!0),r&&(l||(t.preventDefault?t.preventDefault():t.returnValue=!1))}};r.on(e,a,l)}}();var d='.qdp-container{position:absolute;width:211px;min-height:183px;font-size:12px;font-family: Tahoma;border:1px solid #D1D1D1;padding:1px;z-index:9999;user-select: none;-webkit-user-select: none;background: #fff;}.qdp-container ul,.qdp-container li{list-style: none;padding:0px;margin:0px;}.qdp-arrow{position:absolute;display:block;width:0;height:0;border-color:transparent;border-style:solid;border-width:11px;left:50%;margin-left:-11px;border-top-width:0;border-bottom-color:#D1D1D1;top:-12px}.qdp-bar{height: 20px;background: #f7f7f7;color: #404a58;font-weight: bold;width: 201px;position: relative;padding: 10px 5px;}.qdp-bar select{width: 72px;margin: 0px 5px;height:18px;vertical-align: middle;outline: none;}.qdp-prev,.qdp-next{display: block;cursor: pointer;margin:1px;color:#ababab;font-family: Menlo, "Courier New",Courier,monospace;}.qdp-prev{float:left;}.qdp-next{float:right;}.qdp-bar ul{position:absolute;}.qdp-year{margin-left: 24px;position: relative;top: 1px;}.qdp-days{margin-top: 6px;color:#91959c;}.qdp-days li{float:left;height:22px;width:30px;text-align:center;font-weight: bold;margin-top:6px;}.qdp-dates{clear:both;}.qdp-dates li{float: left;width: 19px;height: 18px;padding: 1px;margin: 3px;text-align: center;line-height: 19px;padding-right: 2px;}.qdp-date-item{border:1px solid #fff;cursor: pointer;color: #171d25;}.qdp-empty{border:1px solid #fff;}.qdp-date-item:hover{background:#f7f7f7;color: #171d25;}.qdp-disable{border:1px solid #fff;cursor: not-allowed;color:#a2a2a2;}.qdp-today{border:1px solid #0071ce;color: #0071ce;}.qdp-selected,.qdp-selected:hover{border:1px solid #0071ce;background:#0071ce;color:#fff;}',l='<div class="qdp-arrow"></div><div class="qdp-arrow" style="border-bottom-color: #f7f7f7;top: -10px;"></div><a class="qdp-prev"  data-evt="prev">&lt;</a><label class="qdp-year"></label><%=year%><select><% for(var i=0,mon;mon = months[i];i++){ %><option  data-evt="onmonth" value="<%=i%>"><%=mon%></option><% } %></select><%=month%><a class="qdp-next"  data-evt="next">&gt;</a>',p="<% for(var i=0,day;day = days[i];i++){ %><li><%=day%></li><% } %>",s='<% for(var i=0;i<emptys;i++){ %><li  class="qdp-empty">&nbsp;</li><% } %><% for(var i=0,item;item=dates[i];i++){ %><li class="<%=item.cls%>"  data-evt="<%=item.evt%>"><%=item.date%></li><% } %>',c={"zh-cn":{months:["一","二","三","四","五","六","七","八","九","十","十一","十二"],days:["一","二","三","四","五","六","日"],year:"年",month:"月"},"zh-tw":{months:["壹","贰","叁","肆","伍","陆","柒","捌","玖","拾","拾壹","拾贰"],days:["壹","贰","叁","肆","伍","陆","日"],year:"年",month:"月"},"en-us":{months:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"],days:["Mon","Tues","Wed","Thur","Fri","Sat","Sun"],year:"&nbsp;",month:"&nbsp;"}},u=(navigator.language||navigator.browserLanguage||"en-us").toLowerCase(),g=c[u]?c[u]:c["en-us"],m=864e5,f={},h=1,b=[],v=null,y=32495136761757,x={change:{}};r.ready(function(){r.insertStyle(d),v=new o,b=document.getElementsByTagName("input"),i(),r.on(document.documentElement,"click",function(){var t,e,a,i=this,o=i.getAttribute("dpid");if(!v.contains(this))if(o){var d=r.getClientRect(i);v.show({x:d.left,y:d.top+d.height+10,timestamp:1*this.getAttribute("timestamp"),begin:this.getAttribute("begin"),end:this.getAttribute("end"),range:this.getAttribute("range"),callback:function(d){e=+d,i.setAttribute("timestamp",e),i.value=r.format(d),(t=i.getAttribute("group"))&&n({group:t,timestamp:+d,dpid:o}),a=i.getAttribute("cid"),a&&x.change[a]&&x.change[a].call(i,e)}})}else v.hide()})}),e.trigger=i,e.change=function(t,e){x.change[t]=e}});